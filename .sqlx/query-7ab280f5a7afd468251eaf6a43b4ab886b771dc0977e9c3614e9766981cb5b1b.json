{
  "db_name": "PostgreSQL",
  "query": "WITH latest_block_numbers AS (\n    SELECT address, MAX(block_number) as block_number\n    FROM historical_nonces\n    GROUP BY address\n),\nlatest_nonces AS (\n    SELECT accounts.address, historical_nonces.nonce\n    FROM accounts\n    JOIN latest_block_numbers\n    ON latest_block_numbers.address = accounts.address\n    LEFT JOIN historical_nonces on accounts.address = historical_nonces.address\n        AND latest_block_numbers.block_number = historical_nonces.block_number\n)\nUPDATE accounts\nSET latest_nonce = latest_nonces.nonce\nFROM latest_nonces\nWHERE latest_nonces.address = accounts.address\n    AND latest_nonces.nonce IS DISTINCT FROM accounts.latest_nonce\n",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": []
    },
    "nullable": []
  },
  "hash": "7ab280f5a7afd468251eaf6a43b4ab886b771dc0977e9c3614e9766981cb5b1b"
}
