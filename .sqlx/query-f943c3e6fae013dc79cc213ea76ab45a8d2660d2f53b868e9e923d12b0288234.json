{
  "db_name": "PostgreSQL",
  "query": "WITH block_insert AS (\n    INSERT INTO blocks (\n        number,\n        hash,\n        transactions_root,\n        gas_limit,\n        gas_used,\n        logs_bloom,\n        timestamp_in_secs,\n        parent_hash,\n        author,\n        extra_data,\n        miner,\n        difficulty,\n        receipts_root,\n        uncle_hash,\n        size,\n        state_root,\n        total_difficulty,\n        created_at\n    )\n    VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, current_timestamp)\n    RETURNING 1 as res\n),\n\ntransaction_insert AS (\n    INSERT INTO transactions (\n        hash,\n        signer_address,\n        nonce,\n        address_from,\n        address_to,\n        input,\n        output,\n        gas,\n        gas_price,\n        idx_in_block,\n        block_number,\n        block_hash,\n        v,\n        r,\n        s,\n        value,\n        result\n    )\n    SELECT *\n    FROM\n        unnest(\n            $18::bytea [],\n            $19::bytea [],\n            $20::numeric [],\n            $21::bytea [],\n            $22::bytea [],\n            $23::bytea [],\n            $24::bytea [],\n            $25::numeric [],\n            $26::numeric [],\n            $27::int4 [],\n            $28::int8 [],\n            $29::bytea [],\n            $30::bytea [],\n            $31::bytea [],\n            $32::bytea [],\n            $33::numeric [],\n            $34::text []\n        )\n    RETURNING 1 as res\n),\n\nlog_insert AS (\n    INSERT INTO logs (\n        address,\n        data,\n        transaction_hash,\n        transaction_idx,\n        log_idx,\n        block_number,\n        block_hash\n    )\n    SELECT *\n    FROM\n        unnest(\n            $35::bytea [],\n            $36::bytea [],\n            $37::bytea [],\n            $38::int4 [],\n            $39::int4 [],\n            $40::int8 [],\n            $41::bytea []\n        )\n    RETURNING 1 as res\n),\n\ntopic_insert AS (\n    INSERT INTO topics (\n        topic,\n        transaction_hash,\n        transaction_idx,\n        log_idx,\n        topic_idx,\n        block_number,\n        block_hash\n    )\n    SELECT *\n    FROM\n        unnest(\n            $42::bytea [],\n            $43::bytea [],\n            $44::int4 [],\n            $45::int4 [],\n            $46::int4 [],\n            $47::int8 [],\n            $48::bytea []\n        )\n    RETURNING 1 as res\n),\n\naccount_insert AS (\n    WITH account_updates AS (\n        SELECT *\n        FROM\n            unnest(\n                $49::bytea [],\n                $50::bytea [],\n                $51::numeric [],\n                $52::numeric [],\n                $53::int8 [],\n                $54::numeric [],\n                $55::numeric []\n            )\n            AS t (\n                address,\n                bytecode,\n                new_balance,\n                new_nonce,\n                creation_block,\n                original_balance,\n                original_nonce\n            )\n    )\n\n    INSERT INTO accounts (\n        address, bytecode, latest_balance, latest_nonce, creation_block\n    )\n    SELECT\n        address,\n        bytecode,\n        new_balance,\n        new_nonce,\n        creation_block\n    FROM account_updates\n    ON CONFLICT (address) DO\n    UPDATE\n    SET latest_nonce = excluded.latest_nonce,\n    latest_balance = excluded.latest_balance\n    WHERE accounts.latest_nonce\n    = (\n        SELECT original_nonce\n        FROM account_updates\n        WHERE account_updates.address = excluded.address\n    )\n    AND accounts.latest_balance\n    = (\n        SELECT original_balance\n        FROM account_updates\n        WHERE account_updates.address = excluded.address\n    )\n    RETURNING 1 as res\n),\n\nslot_insert AS (\n    WITH slot_updates AS (\n        SELECT *\n        FROM\n            unnest(\n                $56::bytea [],\n                $57::bytea [],\n                $58::bytea [],\n                $59::int8 [],\n                $60::bytea []\n            )\n            AS t (idx, value, account_address, creation_block, original_value)\n    )\n\n    INSERT INTO account_slots (idx, value, account_address, creation_block)\n    SELECT\n        idx,\n        value,\n        account_address,\n        creation_block\n    FROM slot_updates\n    ON CONFLICT (idx, account_address) DO\n    UPDATE\n    SET value = excluded.value\n    WHERE account_slots.value = (\n        SELECT original_value\n        FROM slot_updates\n        WHERE\n            slot_updates.idx = excluded.idx\n            AND slot_updates.account_address = excluded.account_address\n    )\n    RETURNING 1 as res\n),\n\nhistorical_nonce_insert AS (\n    INSERT INTO historical_nonces (address, nonce, block_number)\n    SELECT * FROM unnest($61::bytea [], $62::numeric [], $63::int8 [])\n    RETURNING 1 as res\n),\n\nhistorical_balance_insert AS (\n    INSERT INTO historical_balances (address, balance, block_number)\n    SELECT * FROM unnest($64::bytea [], $65::numeric [], $66::int8 [])\n    RETURNING 1 as res\n),\n\nhistorical_slots_insert AS (\n    INSERT INTO historical_slots (idx, value, account_address, block_number)\n    SELECT *\n    FROM unnest($67::bytea [], $68::bytea [], $69::bytea [], $70::int8 [])\n    RETURNING 1 as res\n)\n\nSELECT modified_accounts, modified_slots FROM\n(SELECT count(*) AS modified_accounts FROM account_insert)\nCROSS JOIN\n(SELECT count(*) AS modified_slots FROM slot_insert);\n",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "modified_accounts",
        "type_info": "Int8"
      },
      {
        "ordinal": 1,
        "name": "modified_slots",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Int8",
        "Bytea",
        "Bytea",
        "Numeric",
        "Numeric",
        "Bytea",
        "Int8",
        "Bytea",
        "Bytea",
        "Bytea",
        "Bytea",
        "Numeric",
        "Bytea",
        "Bytea",
        "Numeric",
        "Bytea",
        "Numeric",
        "ByteaArray",
        "ByteaArray",
        "NumericArray",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "NumericArray",
        "NumericArray",
        "Int4Array",
        "Int8Array",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "NumericArray",
        "TextArray",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "Int4Array",
        "Int4Array",
        "Int8Array",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "Int4Array",
        "Int4Array",
        "Int4Array",
        "Int8Array",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "NumericArray",
        "NumericArray",
        "Int8Array",
        "NumericArray",
        "NumericArray",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "Int8Array",
        "ByteaArray",
        "ByteaArray",
        "NumericArray",
        "Int8Array",
        "ByteaArray",
        "NumericArray",
        "Int8Array",
        "ByteaArray",
        "ByteaArray",
        "ByteaArray",
        "Int8Array"
      ]
    },
    "nullable": [
      null,
      null
    ]
  },
  "hash": "f943c3e6fae013dc79cc213ea76ab45a8d2660d2f53b868e9e923d12b0288234"
}
